Renshi is currently pre-release, though it can work in a project. I'm waiting until I've used it in a couple of my own before I make it a 1.0 release.

Renshi is a templating language for Ruby which is unobtrusive in HTML and XHTML structures. It is built on Nokogiri.
If you're looking for a templating language which is simple, lightweight, and won't impose itself on HTML designers, Renshi is for you!

$ Code
======
To output data on the page stick a $ in front of your expression

$foo
$Time.now

If there's a space in your expression or you need formatting around your expression use ${}

${foo},$Time.now 

To insert code in your template use $[]

$[foo = "hello world"]

$foo

Attribute Expressions
===================
Renshi has a small library of expressions which can be inserted into HTML or XML elements as attributes.
Attribute expressions follow the form of 

r:expression_name="expression" - the expression value is treated as a Ruby expression .

* Current Attribute Expressions
* If
* Elsif
* Else
* While
* For


* If
<span r:if="true">hello!</span> would render "<span>hello</span>"

<span r:if="false">goodbye!</span> will render "".

* Elsif

<span r:if="false">hello!</span>
<span r:elsif="true">goodbye</span>

* Else

<span r:if="false">hello!</span>
<span r:elsif="false">goodbye</span>
<span r:else>neither</span>

r:elsif and r:else must be adjacent (a sibling) to the element.


For example, the below is fine, because the if and else statements are adjacent siblings in the tree of elements.

<div id="menu" r:if="user.is_administrator?">
  <div id="admin_menu"> ... </div>
<div id="menu" r:else>
  <div id="user_menu"> ... </div>
</div>  

but this is not:

<div id="menu" r:if="user.is_administrator?">
  <div id="admin_menu"> ... </div>
<div id="register">
  <div id="register"> ... </div>
</div>
<div id="menu" r:else>
  <div id="user_menu"> ... </div>
</div>  

but this is:

<div id="menu" r:if="user.is_administrator?">
  <div id="admin_menu"> ... </div>
<div id="menu" r:else>
  <div id="user_menu"> ... </div>
</div>  
<div id="register">
  <div id="register"> ... </div>
</div>


* While

<div r:while="foo != 2" id="content$foo">
  hello$foo
  $[foo = foo + 1]
</div>

renders:

<div id="content0">
  hello0
  
</div><div id="content1">
  hello1
  
</div>

* For

<div id="content$foo" r:for="foo in foos">
hello$foo
</div>

renders:

<div id="content0">
hello0
</div><div id="content1">
hello1
</div><div id="content2">
hello2
</div>

Further elements will appear as I have time to make them or others want to contribute them. There isn't much to making them. 

See renshi/lib/renshi/attribute_expressions for how they work.

Planned element expressions:

* r:each
* r:unless
* r:def - something like genshi's py:def

Other Rules
===========
$ values inside of attributes are only interpreted as Renshi variables for regular attributes (not renshi attributes).

E.g. <div r:if="'abc' =~ /$abc/" id="content$foo"> the r:if statement would treat $ exactly as Ruby does, while the id attribute value is transformed.


Miscellaneous
=============
To print a $ use $$, e.g. $$10.95 comes out as $10.95

Renshi documents are appended with the suffix of .ren

e.g. index.html.ren or index.ren 


Framework Integration
=====================

* Rails
Simply require the renshi gem in your code, and Renshi will make itself available.

There is a Rails 2.3.2 example app in the examples directory. Go there, start up the application, and visit http://localhost:3000/hello

I'd welcome integrations for Sinatra and Merb or XYZ framework. See renshi/lib/renshi/frameworks 


Gem Building
============
run 
`rake gem`
then
`sudo gem install pkg/renshi-0.0.2.gem`


Development
===========
Please report any bugs at the http://renshi.lighthouseapp.com . 

Contributions are welcome. Right now it's just me. 

Why Renshi?
===========
Firstly, it doesn't need a reason. It's a fun project.

But ...

I've always found ERB to be a bit cumbersome - <%= is quite tiring to type out when you realise it could be much shorter. I used to think that Velocity, in Java, 
was the most fun templating language I'd used, and I had wanted something equally as concise for Ruby.

A real need for it emerged in a project which relied upon an external design house handing us HTML. Converting it incessantly into HAML was nightmarish. A colleague 
mentioned Genshi in Python as ideal, which was when the idea of Renshi was conceived.

English to Japanese
===================
Renshi (錬士 : れんし ?): instructor.

In Japanese 'renshi' refers to a martial arts master - http://en.wikipedia.org/wiki/Renshi. 'Ren' means 'polished' and 'shi' means 'person'. 

It apparently also means 'to know another' in Mandarin.

The project was originally inspired by Genshi, http://genshi.edgewall.org - though it is significantly different in its approach.
